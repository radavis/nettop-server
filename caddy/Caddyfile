{
	email {env.ACME_EMAIL}
}

(headers) {
	header {
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
		X-XSS-Protection "1; mode=block"
		X-Content-Type-Options "nosniff"
		X-Frame-Options "sameorigin"
		X-Robots-Tag "noindex, noarchive, nofollow"
	}
}

*.{$DOMAIN_NAME} {
	tls {$ACME_EMAIL} {
		dns namecheap {
			api_key {env.NAMECHEAP_API_KEY}
			user {env.NAMECHEAP_USERNAME}
			endpoint {env.NAMECHEAP_ENDPOINT}
		}
	}
}

hello.{$DOMAIN_NAME} {
	import headers
	respond "Hello"
}

www.{$DOMAIN_NAME} {
	import headers
	root * /www/
	file_server
}

gitlab.{$DOMAIN_NAME} {
	import headers
	reverse_proxy gitlab:80
}

registry.{$DOMAIN_NAME} {
	import headers
}
